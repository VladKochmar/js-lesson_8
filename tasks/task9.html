<!DOCTYPE html>
<html lang="ukr">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="../css/style.css">
   <title>Завдання 9</title>
</head>

<body>
   <main class="page">
      <section class="block">
         <div class="block__container">
            <h1 class="block__title">Обов'язкове завдання 9</h1>
            <div class="block__body">
               <a href="../index.html" class="block__link">Повернутися до index.html</a>
            </div>
         </div>
      </section>
   </main>
   <script>
      function createSeaBattleLevel(fieldWidth, ships) {
         let field = [], shipsCounter = 0

         for (let i = 0; i < fieldWidth; i++) {
            if (ships > shipsCounter) {
               field.push(Math.floor(Math.random() * 2))
               if (field[i] === 1) shipsCounter++
            } else
               field.push(0)
         }

         if (shipsCounter < ships) {
            for (let i = 0; i < fieldWidth && shipsCounter < ships; i++) {
               if (field[i] === 0) {
                  field[i] = 1
                  shipsCounter++
               }
            }
         }

         return field
      }

      function initGame(level, shipsNum) {
         let blownUpShips = 0

         do {
            const shotCoordinates = parseInt(prompt(`Введіть координати пострілу від 0 до ${fieldWidth - 1}`))

            if (seaBattleLevel[shotCoordinates] === 1) {
               seaBattleLevel[shotCoordinates] = 0
               blownUpShips++
               alert(`Вітаю! Ви потопили ворожий корабель. Залишилось ${shipsNum - blownUpShips} кораблів`)
            }
            else
               alert(`Ви промахнулись. Залишилось ${shipsNum - blownUpShips} кораблів`)
         } while (blownUpShips < shipsNum)
      }

      const fieldWidth = parseInt(prompt('Введіть довжину поля'))
      const shipsNum = parseInt(prompt('Введіть кількість кораблів'))

      const seaBattleLevel = createSeaBattleLevel(fieldWidth, shipsNum)
      console.log(seaBattleLevel);


      initGame(seaBattleLevel, shipsNum)

      alert('Вітаю! Ви потопили всі кораблі')
   </script>
</body>

</html>